<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KendaliKas</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;,">
</head>

<body>

  <!-- Header with Logo -->
  <header style="display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; background-color: #f8f9fa; border-bottom: 1px solid #ddd;">
    <img src="FINALLOGO-removebg-preview.png" alt="KendaliKas Logo" style="height: 200px; width: auto; object-fit: contain;">
    <h1 style="margin: 0; font-size: 24px; color: #333;">KendaliKas</h1>
  </header>

  <!-- Hamburger Menu Button -->
  <button class="menu-toggle" id="menuToggle">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <main>
    <section id="dashboard" class="active">
      <div style="padding: 20px;">
        <h1>Financial Dashboard</h1>

        <div class="summary-cards">
          <div class="summary-card income">
            <h3>Total Income</h3>
            <div class="amount" id="totalIncome">Rp 0</div>
          </div>
          <div class="summary-card expense">
            <h3>Total Expenses</h3>
            <div class="amount" id="totalExpense">Rp 0</div>
          </div>
          <div class="summary-card balance">
            <h3>Current Balance</h3>
            <div class="amount" id="currentBalance">Rp 0</div>
          </div>
        </div>

        <div class="pie-charts" style="display: flex; justify-content: space-around; margin-top: 20px; flex-wrap: wrap;">
          <div style="width: 45%; min-width: 300px;">
            <h3>Income by Category</h3>
            <canvas id="incomePieChart"></canvas>
          </div>
          <div style="width: 45%; min-width: 300px;">
            <h3>Expenses by Category</h3>
            <canvas id="expensePieChart"></canvas>
          </div>
        </div>

      </div>
    </section>

    <section id="analytics">
      <div style="padding: 20px;">
        <h1>Analytics</h1>
        <canvas id="analyticsChart" width="800" height="400"></canvas>
        <div id="anomalyInfo" style="margin-top:20px;"></div>
        <div id="anomalyList" style="margin-top:20px;"></div>
      </div>
    </section>

    <section id="input">
      <button id="addData">+</button>
      <div id="menutambahdata">
        <div>
          <button class="close-btn" onclick="closeMenu()">×</button>
          <h1 id="modalTitle">Add Transaction Data</h1>
          <form id="transactionForm">
            <div style="margin-bottom: 15px;">
              <label for="nama">Transaction Name:</label><br>
              <input type="text" id="nama" name="nama" required
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>



            <div style="margin-bottom: 15px;">
              <label for="jenis">Transaction Type:</label><br>
              <select id="jenis" name="jenis" required
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="">Select type</option>
                <option value="pemasukan">Income</option>
                <option value="pengeluaran">Expense</option>
              </select>
            </div>

            <div style="margin-bottom: 15px;">
              <label for="jumlah">Amount (Rp):</label><br>
              <input type="text" id="jumlah" name="jumlah" required
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <div style="margin-bottom: 15px;">
              <label for="tanggal">Date:</label><br>
              <input type="date" id="tanggal" name="tanggal" required
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <div style="margin-bottom: 15px;">
              <label for="kategori">Category:</label><br>
              <input type="text" id="kategori" name="kategori" placeholder="Example: Salary, Shopping, Transport"
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <button type="submit" id="submitBtn" class="modal-button primary">Save Transaction</button>
          </form>
        </div>
      </div>

      <!-- Modal for Collaborator Menu -->
      <div id="menuCollaborator">
        <div>
          <button class="close-btn" onclick="closeCollaboratorMenu()">×</button>
          <h1>Collaborator Menu</h1>
          <button class="notification-btn" onclick="openNotificationMenu(event)">
            <svg viewBox="0 0 24 24">
              <path
                d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z" />
            </svg>
          </button>
          <div id="collaboratorList">
            <!-- Collaborators will be loaded here dynamically by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Modal for Notification Menu -->
      <div id="menuNotification">
        <div>
          <button class="close-btn" onclick="closeNotificationMenu()">×</button>
          <h1>Notifications</h1>
          <div id="notificationList">
            <!-- Notifications will be loaded here -->
            <p>No new notifications</p>
          </div>
        </div>
      </div>

      <!-- Modal for Table Menu -->
      <div id="menuTable">
        <div>
          <button class="close-btn" onclick="closeTableMenu()">×</button>
          <h1>Table Menu</h1>
          <div id="tableList">
            <!-- Tables will be loaded here -->
          </div>
          <div class="modal-button-container">
            <button id="createTableBtn" class="modal-button primary">Make Table</button>
            <button id="requestAccessBtn" class="modal-button secondary">Request Access</button>
          </div>
        </div>
      </div>

      <!-- Modal for Request Access Menu -->
      <div id="requestAccessMenu">
        <div>
          <button class="close-btn" onclick="closeRequestAccessMenu()">×</button>
          <h1>Request Access Menu</h1>
          <form id="requestAccessForm">
            <div style="margin-bottom: 15px;">
              <label for="tableId">Table ID:</label><br>
              <input type="text" id="tableId" name="tableId" required
                style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            <button type="submit" class="modal-button secondary">Submit</button>
          </form>
        </div>
      </div>

      <!-- Modal for Create Table -->
      <div id="createTableModal">
        <div>
          <button class="close-btn" onclick="closeCreateTableModal()">×</button>
          <h1>Make Table</h1>
          <div id="createTableForm">
            <input type="text" id="newTableName" placeholder="Table Name"
              style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <button id="saveTableBtn" class="modal-button secondary">Save</button>
          </div>
        </div>
      </div>

      <!-- Modal for Delete Table -->
      <div id="deleteTableModal">
        <div>
          <button class="close-btn" onclick="closeDeleteTableModal()">×</button>
          <h1 id="deleteTableHeader">Delete Table</h1>
          <p>Unique Table ID: <span id="deleteTableId"></span></p>
          <button id="confirmDeleteTableBtn" class="modal-button danger">Delete Table</button>
        </div>
      </div>

      <!-- Modal for Export-Import Menu -->
      <div id="menuExportImport">
        <div>
          <button class="close-btn" onclick="closeExportImportMenu()">×</button>
          <h1>Export-Import Menu</h1>

          <div class="export-import-section">
            <h2>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
              </svg>
              Export Data
            </h2>
            <button id="exportExcelBtn" class="export-btn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12.9,14.5L15.8,19H14L12,15.6L10,19H8.2L11.1,14.5L9.3,11H11L12,13.4L13,11H14.7L12.9,14.5Z" />
              </svg>
              Export to Excel
            </button>
          </div>

          <div class="export-import-section">
            <h2>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
              </svg>
              Import Data
            </h2>
            <div class="drag-drop-area" id="dragDropArea">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M12,12L8,16H11V22H13V16H16L12,12Z" />
              </svg>
              <p>Drag and drop your Excel file here or click to select</p>
            </div>
            <input type="file" id="importExcelFile" accept=".xlsx,.xls" class="file-input-hidden">
            <button id="importExcelBtn" class="import-btn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
              </svg>
              Import from Excel
            </button>
          </div>
        </div>
      </div>

      <!-- Modal for More Information -->
      <div id="moreInfoModal">
        <div>
          <button class="close-btn" onclick="closeMoreInfoModal()">×</button>
          <h1>More Information</h1>
          <!-- Content is empty for now -->
        </div>
      </div>

      <div style="padding: 20px;">
        <h2 id="dataTransaksiHeader">Transaction Data</h2>

        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search by transaction name..."
            style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-right: 10px;">
          <button id="btnCollaborator" class="icon-button circle" aria-label="Menu Collaborator"
            title="Collaborator Menu" type="button" tabindex="0">
            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24" fill="currentColor"
              aria-hidden="true">
              <path
                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
            </svg>
          </button>
          <button id="btnTable" class="icon-button square" aria-label="Menu Tabel" title="Table Menu" type="button"
            tabindex="0">
            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24" fill="currentColor"
              aria-hidden="true">
              <path
                d="M3 3h18v18H3V3zm2 2v4h4V5H5zm6 0v4h4V5h-4zm6 0v4h-4V5h4zM5 11v4h4v-4H5zm6 0v4h4v-4h-4zm6 0v4h-4v-4h4zM5 17v2h14v-2H5z" />
            </svg>
          </button>
          <button id="btnExportImport" class="icon-button square" aria-label="Menu Export-Import"
            title="Export-Import Menu" type="button" tabindex="0">
            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24" fill="currentColor"
              aria-hidden="true">
              <path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z" />
            </svg>
          </button>
        </div>

        <div class="table-container">
          <table class="transaction-table" id="transactionTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Transaction Name</th>
                <th>Category</th>
                <th>Type</th>
                <th>Amount</th>
                <th aria-label="Actions"></th>
              </tr>
            </thead>
            <tbody id="transactionTableBody">
              <tr>
                <td colspan="6" style="text-align: center; color: #666;">No transactions yet</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="profile">
      <div style="padding: 20px;">
        <h1>Profile</h1>
        <div id="userInfo" style="display: none;">
          <div style="text-align: center; margin-bottom: 20px;">
            <img id="userPhoto" src="" alt="Profile Photo"
              style="width: 100px; height: 100px; border-radius: 50%; margin-bottom: 10px;">
            <h2 id="userName"></h2>
            <p id="userEmail"></p>
          </div>
          <div class="logout-container">
            <button id="logoutBtn" class="modal-button danger">Logout</button>
          </div>
        </div>
        <div id="loadingProfile" style="text-align: center;">Loading profile...</div>
      </div>
    </section>

  </main>

  <nav>
    <a href="#dashboard" class="active">Dashboard</a>
    <a href="#analytics">Analytics</a>
    <a href="#input">Transaction</a>
    <a href="#profile">Profile</a>
  </nav>

  <script type="module" src="script.js"></script>



</body>

</html>